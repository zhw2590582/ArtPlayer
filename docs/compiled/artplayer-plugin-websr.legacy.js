
/*!
 * artplayer-plugin-websr.js v1.0.0
 * Github: https://github.com/zhw2590582/ArtPlayer
 * (c) 2017-2026 Harvey Zhao
 * Released under the MIT License.
 */
!function(e,t,r,n,s){var o="u">typeof globalThis?globalThis:"u">typeof self?self:"u">typeof window?window:"u">typeof global?global:{},i="function"==typeof o[n]&&o[n],a=i.i||{},c=i.cache||{},l="u">typeof module&&"function"==typeof module.require&&module.require.bind(module);function u(t,r){if(!c[t]){if(!e[t]){if(s[t])return s[t];var a="function"==typeof o[n]&&o[n];if(!r&&a)return a(t,!0);if(i)return i(t,!0);if(l&&"string"==typeof t)return l(t);var d=Error("Cannot find module '"+t+"'");throw d.code="MODULE_NOT_FOUND",d}h.resolve=function(r){var n=e[t][1][r];return null!=n?n:r},h.cache={};var f=c[t]=new u.Module(t);e[t][0].call(f.exports,h,f,f.exports,o)}return c[t].exports;function h(e){var t=h.resolve(e);if(!1===t)return{};if(Array.isArray(t)){var r={__esModule:!0};return t.forEach(function(e){var t=e[0],n=e[1],s=e[2]||e[0],o=u(n);"*"===t?Object.keys(o).forEach(function(e){"default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(r,e)||Object.defineProperty(r,e,{enumerable:!0,get:function(){return o[e]}})}):"*"===s?Object.defineProperty(r,t,{enumerable:!0,value:o}):Object.defineProperty(r,t,{enumerable:!0,get:function(){return"default"===s?o.__esModule?o.default:o:o[s]}})}),r}return u(t)}}u.isParcelRequire=!0,u.Module=function(e){this.id=e,this.bundle=u,this.require=l,this.exports={}},u.modules=e,u.cache=c,u.parent=i,u.distDir=void 0,u.publicUrl=void 0,u.devServer=void 0,u.i=a,u.register=function(t,r){e[t]=[function(e,t){t.exports=r},{}]},Object.defineProperty(u,"root",{get:function(){return o[n]}}),o[n]=u;for(var d=0;d<t.length;d++)u(t[d]);if(r){var f=u(r);"object"==typeof exports&&"u">typeof module?module.exports=f:"function"==typeof define&&define.amd&&define(function(){return f})}}({hrC3O:[function(e,t,r,n){var s=e("@parcel/transformer-js/src/esmodule-helpers.js"),o=e("@swc/helpers/cjs/_async_to_generator.cjs"),i=e("@swc/helpers/cjs/_type_of.cjs"),a=e("@swc/helpers/cjs/_ts_generator.cjs"),c=e("./Upscaler.js"),l=s.interopDefault(c);window.artplayerPluginWebsr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{networkSize:"medium",compare:!1,weightsBaseUrl:"/weights",workerUrl:"/worker/main.js",videoScale:2};return function(t){var r=t.template,n=r.$video,s=r.$player,c=document.createElement("canvas");function u(){var e=t.video,r=s.offsetWidth||640,n=s.offsetHeight||360,o=(e.videoWidth||640)/(e.videoHeight||360),i=r,a=n;return r/n>o?i=n*o:a=r/o,{displayWidth:i,displayHeight:a}}if(s.appendChild(c),c.style.position="absolute",c.style.zIndex="11",c.style.pointerEvents="none",c.style.top="50%",c.style.left="50%",c.style.transform="translate(-50%, -50%)",c.style.opacity="0",c.style.transition="opacity 0.2s ease",!l.default||!l.default.isSupported||!l.default.isSupported())return void console.warn("Upscaler is not supported in this environment");var d=new(0,l.default)({networkSize:e.networkSize||"medium",weightsBaseUrl:e.weightsBaseUrl||"/weights",workerUrl:e.workerUrl||"/worker/main.js",videoScale:e.videoScale||2}),f=!1;function h(){return(0,o._)(function(){return(0,a._)(this,function(t){switch(t.label){case 0:if(f)return[2];f=!0,t.label=1;case 1:return t.trys.push([1,4,,5]),[4,new Promise(function(e,t){if(n.readyState>=1)return void e();var r=function(){o(),e()},s=function(){o(),t(Error("Failed to load video metadata"))},o=function(){n.removeEventListener("loadedmetadata",r),n.removeEventListener("error",s)};n.addEventListener("loadedmetadata",r),n.addEventListener("error",s)})];case 2:return t.sent(),[4,d.startRealtimeUpscale(n,c,e.networkSize||d.networkSize)];case 3:return t.sent(),requestAnimationFrame(function(){c.style.opacity="1"}),[3,5];case 4:return console.error("artplayer-plugin-upscaler: failed to start realtime",t.sent()),[3,5];case 5:return[2]}})})()}var p=u(),m=p.displayWidth,v=p.displayHeight;c.style.width=m+"px",c.style.height=v+"px";var g=50,y=!1,w=!!e.compare,b=document.createElement("div");function k(){if(w){var e=u(),t=e.displayWidth,r=e.displayHeight,n="linear-gradient(to right, transparent 0%, transparent ".concat(g,"%, black ").concat(g,"%, black 100%)");c.style.maskImage=n;var o=s.offsetWidth||640,i=s.offsetHeight||360,a=(o-t)/2+t*g/100;b.style.top=(i-r)/2+"px",b.style.left=a+"px",b.style.height=r+"px",b.style.transform="translateX(-50%)"}else c.style.maskImage="none"}function _(e){w&&(y=!0)}function j(e){if(w&&y){var t=s.getBoundingClientRect(),r=u().displayWidth,n=s.offsetWidth||640;g=Math.max(0,Math.min(100,g=(e.clientX-t.left-(n-r)/2)/r*100)),k()}}function E(e){y=!1}return b.style.position="absolute",b.style.width="3px",b.style.backgroundColor="rgba(255, 255, 255, 0.75)",b.style.cursor="ew-resize",b.style.zIndex="12",b.style.pointerEvents="auto",b.style.display=w?"block":"none",b.style.boxShadow="0 0 2px rgba(0, 0, 0, 0.1)",w&&(s.appendChild(b),b.addEventListener("mousedown",_),document.addEventListener("mousemove",j),document.addEventListener("mouseup",E),k()),t.on("destroy",function(){d&&"function"==typeof d.dispose&&d.dispose(),b.removeEventListener("mousedown",_),document.removeEventListener("mousemove",j),document.removeEventListener("mouseup",E)}),t.on("resize",function(){var e=u(),t=e.displayWidth,r=e.displayHeight;c.style.width=t+"px",c.style.height=r+"px",k()}),t.on("play",function(){h()}),{name:"artplayerPluginWebsr",upscaler:d,update:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(r&&(void 0===r?"undefined":(0,i._)(r))==="object"){if(Object.prototype.hasOwnProperty.call(r,"compare")){var n=!!r.compare;e.compare=n,(w=n)?(b.parentNode||s.appendChild(b),b.style.display="block",b.addEventListener("mousedown",_),document.addEventListener("mousemove",j),document.addEventListener("mouseup",E),k()):(c.style.maskImage="none",b.style.display="none",b.removeEventListener("mousedown",_),document.removeEventListener("mousemove",j),document.removeEventListener("mouseup",E))}r.networkSize&&(e.networkSize=r.networkSize,d&&"function"==typeof d.stopRealtimeUpscale&&d.stopRealtimeUpscale(),f=!1,t.paused||h())}}}}}},{"@swc/helpers/cjs/_async_to_generator.cjs":"cZn0e","@swc/helpers/cjs/_type_of.cjs":"iXhRw","@swc/helpers/cjs/_ts_generator.cjs":"eltGh","./Upscaler.js":"7WXlf","@parcel/transformer-js/src/esmodule-helpers.js":"qpMMf"}],cZn0e:[function(e,t,r,n){"use strict";function s(e,t,r,n,s,o,i){try{var a=e[o](i),c=a.value}catch(e){r(e);return}a.done?t(c):Promise.resolve(c).then(n,s)}r._=function(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function a(e){s(i,n,o,a,c,"next",e)}function c(e){s(i,n,o,a,c,"throw",e)}a(void 0)})}}},{}],iXhRw:[function(e,t,r,n){"use strict";r._=function(e){return e&&"u">typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}},{}],eltGh:[function(e,t,r,n){"use strict";r._=function(e,t){var r,n,s,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype),a=Object.defineProperty;return a(i,"next",{value:c(0)}),a(i,"throw",{value:c(1)}),a(i,"return",{value:c(2)}),"function"==typeof Symbol&&a(i,Symbol.iterator,{value:function(){return this}}),i;function c(a){return function(c){var l=[a,c];if(r)throw TypeError("Generator is already executing.");for(;i&&(i=0,l[0]&&(o=0)),o;)try{if(r=1,n&&(s=2&l[0]?n.return:l[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,l[1])).done)return s;switch(n=0,s&&(l=[2&l[0],s.value]),l[0]){case 0:case 1:s=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,n=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!(s=(s=o.trys).length>0&&s[s.length-1])&&(6===l[0]||2===l[0])){o=0;continue}if(3===l[0]&&(!s||l[1]>s[0]&&l[1]<s[3])){o.label=l[1];break}if(6===l[0]&&o.label<s[1]){o.label=s[1],s=l;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(l);break}s[2]&&o.ops.pop(),o.trys.pop();continue}l=t.call(e,o)}catch(e){l=[6,e],n=0}finally{r=s=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}}},{}],"7WXlf":[function(e,t,r,n){var s=e("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(r),s.export(r,"default",function(){return d});var o=e("@swc/helpers/cjs/_async_to_generator.cjs"),i=e("@swc/helpers/cjs/_class_call_check.cjs"),a=e("@swc/helpers/cjs/_create_class.cjs"),c=e("@swc/helpers/cjs/_define_property.cjs"),l=e("@swc/helpers/cjs/_object_spread.cjs"),u=e("@swc/helpers/cjs/_ts_generator.cjs"),d=function(){"use strict";function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,i._)(this,e);var r=t.weightsBaseUrl||"/weights";this.networks=t.networks||{small:{name:"anime4k/cnn-2x-l",weightsUrl:"".concat(r,"/cnn-8.json")},medium:{name:"anime4k/cnn-2x-16",weightsUrl:"".concat(r,"/cnn-16.json")},large:{name:"anime4k/cnn-2x-28",weightsUrl:"".concat(r,"/cnn-28.json")}},this.weightsBaseUrl=r,this.networkSize=t.networkSize||"medium",this.workerUrl=t.workerUrl||"/worker/main.js",this.timeouts=(0,l._)({},e.DEFAULT_TIMEOUTS,t.timeouts||{}),this.delays=(0,l._)({},e.DEFAULT_DELAYS,t.delays||{}),this.imageScale="number"==typeof t.imageScale&&t.imageScale>0?t.imageScale:2,this.videoScale="number"==typeof t.videoScale&&t.videoScale>0?t.videoScale:2,this.weightsCache=new Map,this.workerInstance=null,this.messageHandlers={},this.progressCallback=null,this.processingType=null,this.realtimeLoopId=null,this.realtimeState=null,this.init()}return(0,a._)(e,[{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.prewarm;if(!e.isSupported())throw Error("Upscaler is not supported in this environment");return(void 0===r||r)&&this.getWorker().postMessage({cmd:"isSupported"}),this}},{key:"getWorker",value:function(){var e=this;return this.workerInstance||(this.workerInstance=new Worker(this.workerUrl),this.workerInstance.onmessage=function(t){return e.handleWorkerMessage(t)}),this.workerInstance}},{key:"handleBlobResponse",value:function(e){var t="video"===this.processingType?"videoBlob":"imageBlob",r=this.messageHandlers[t];e.data instanceof Blob&&r&&r((0,c._)({},t,e.data))}},{key:"requestBlob",value:function(){var e="video"===this.processingType?"getVideoBlob":"getImageBlob";this.getWorker().postMessage({cmd:e})}},{key:"handleWorkerMessage",value:function(t){var r=t.data;if(console.debug("Worker message:",r),r.cmd){var n=r.cmd;if("progress"===n){var s=e.extractProgressValue(r);null!==s&&this.progressCallback&&this.progressCallback(s),this.messageHandlers.progress&&this.messageHandlers.progress(r)}else"finished"===n?r.data instanceof Blob?this.handleBlobResponse(r):this.requestBlob():this.messageHandlers[n]&&this.messageHandlers[n](r)}}},{key:"loadWeights",value:function(e){return(0,o._)(function(){var t,r;return(0,u._)(this,function(n){switch(n.label){case 0:if(this.validateNetworkSize(e),this.weightsCache.has(e))return[2,this.weightsCache.get(e)];return[4,fetch(this.networks[e].weightsUrl)];case 1:if(!(t=n.sent()).ok)throw Error("Failed to fetch weights: ".concat(t.statusText));return[4,t.json()];case 2:return r=n.sent(),this.weightsCache.set(e,r),[2,r]}})}).call(this)}},{key:"createOffscreenCanvas",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,n="number"==typeof r&&r>0?r:1,s=document.createElement("canvas");if(s.width=e*n,s.height=t*n,"function"!=typeof s.transferControlToOffscreen)throw Error("OffscreenCanvas is not supported in this environment");return s.transferControlToOffscreen()}},{key:"createBlobPromise",value:function(e,t){var r=this;return new Promise(function(n,s){var o=setTimeout(function(){r.messageHandlers[e]&&(delete r.messageHandlers[e],s(Error("".concat(e," processing timeout"))))},t);r.messageHandlers[e]=function(t){delete r.messageHandlers[e],clearTimeout(o);var i=t[e]||t.data;i instanceof Blob?n(i):s(Error("Invalid ".concat(e," format")))}})}},{key:"validateNetworkSize",value:function(e){if(!this.networks[e])throw Error("Invalid networkSize: use one of "+Object.keys(this.networks).join(", "))}},{key:"upscaleImage",value:function(t,r,n){return(0,o._)(function(){var s,o,i,a,c,l,d,f,h,p,m,v,g,y;return(0,u._)(this,function(u){switch(u.label){case 0:if(s=this,!t)throw Error("Image file is required");return o=r||this.networkSize,this.validateNetworkSize(o),this.processingType="image",[4,t.arrayBuffer()];case 1:return i=u.sent(),a=t.type||"image/jpeg",[4,e.loadImageMetadata(i,a)];case 2:return l=(c=u.sent()).width,d=c.height,[4,this.loadWeights(o)];case 3:return f=u.sent(),h=this.networks[o],p="number"==typeof n&&n>0?n:this.imageScale,v=(m=[this.createOffscreenCanvas(l,d,p),this.createOffscreenCanvas(l,d,1)])[0],g=m[1],y=this.createBlobPromise("imageBlob",this.timeouts.IMAGE),this.getWorker().postMessage({cmd:"init",data:{imageArrayBuffer:i,imageMimeType:a,upscaled:v,original:g,resolution:{width:l,height:d},network_name:h.name,weights:f}},[v,g]),setTimeout(function(){s.getWorker().postMessage({cmd:"network",data:{name:h.name,imageArrayBuffer:i,imageMimeType:a,weights:f}}),setTimeout(function(){s.getWorker().postMessage({cmd:"getImageBlob",data:{imageArrayBuffer:i,imageMimeType:a}})},s.delays.NETWORK)},this.delays.INIT),[2,y]}})}).call(this)}},{key:"upscaleVideo",value:function(t,r,n){return(0,o._)(function(){var s,o,i,a,c,l,d,f,h,p,m,v;return(0,u._)(this,function(u){switch(u.label){case 0:if(!t)throw Error("Video file is required");if(s=r||this.networkSize,this.validateNetworkSize(s),!e.isVideoSupported())throw Error("WebCodecs API not supported. Requires Chrome 94+");return this.processingType="video",[4,e.loadVideoMetadata(t,this.timeouts.METADATA)];case 1:return i=(o=u.sent()).width,a=o.height,c=o.duration,[4,this.loadWeights(s)];case 2:return l=u.sent(),d=this.networks[s],f="number"==typeof n&&n>0?n:this.videoScale,p=(h=[this.createOffscreenCanvas(i,a,f),this.createOffscreenCanvas(i,a,1)])[0],m=h[1],v=this.createBlobPromise("videoBlob",this.timeouts.VIDEO),this.getWorker().postMessage({cmd:"process",file:t,fileSize:t.size,duration:c,adjustedResolution:{adjustedInputWidth:i,adjustedInputHeight:a,adjustedOutputWidth:i*f,adjustedOutputHeight:a*f},upscaled:p,original:m,weights:l,network_name:d.name,skipDemuxProgress:!0},[p,m]),[2,v]}})}).call(this)}},{key:"startRealtimeUpscale",value:function(e,t,r,n){return(0,o._)(function(){var s,i,a,c,l,d,f,h,p,m,v,g,y;return(0,u._)(this,function(w){switch(w.label){case 0:if(s=this,!e||!t)throw Error("videoElement and canvasElement are required");return i=r||this.networkSize,this.validateNetworkSize(i),a=this.networks[i],[4,this.loadWeights(i)];case 1:return c=w.sent(),l="number"==typeof n&&n>0?n:this.videoScale,[4,new Promise(function(t,r){if(e.readyState>=1)return void t();var n=function(){o(),t()},s=function(){o(),r(Error("Failed to load video metadata"))},o=function(){e.removeEventListener("loadedmetadata",n),e.removeEventListener("error",s)};e.addEventListener("loadedmetadata",n),e.addEventListener("error",s)})];case 2:if(w.sent(),d=e.videoWidth,f=e.videoHeight,!d||!f)throw Error("Invalid video dimensions");if(h=!t._upscalerTransferred,p=null,h){if(t.width=d*l,t.height=f*l,"function"!=typeof t.transferControlToOffscreen)throw Error("OffscreenCanvas is not supported in this environment");p=t.transferControlToOffscreen(),t._upscalerTransferred=!0}return(m=document.createElement("canvas")).width=d,m.height=f,v=m.getContext("2d"),this.realtimeLoopId&&(cancelAnimationFrame(this.realtimeLoopId),this.realtimeLoopId=null),g={cmd:"realtimeInit",data:{upscaled:h?p:null,resolution:{width:d,height:f,scale:l,outputWidth:d*l,outputHeight:f*l},network_name:a.name,weights:c}},h&&p?this.getWorker().postMessage(g,[p]):this.getWorker().postMessage(g),this.realtimeState={running:!0,video:e,canvas:t,scale:l,busy:!1,frameIndex:0,captureCanvas:m,captureCtx:v},y=function(){return(0,o._)(function(){var e,t,r,n,s,o;return(0,u._)(this,function(i){switch(i.label){case 0:if(!this.realtimeState||!this.realtimeState.running)return[2];if(r=(t=(e=this.realtimeState).video).HAVE_CURRENT_DATA||2,!(!t.paused&&!t.ended&&!e.busy&&t.readyState>=r&&t.videoWidth>0&&t.videoHeight>0))return[3,5];e.busy=!0,i.label=1;case 1:if(i.trys.push([1,3,4,5]),n=e.captureCanvas,s=e.captureCtx,!n||!s)throw Error("Missing capture canvas");return s.drawImage(t,0,0,n.width,n.height),[4,createImageBitmap(n)];case 2:return o=i.sent(),e.frameIndex+=1,this.getWorker().postMessage({cmd:"realtimeFrame",frame:o},[o]),[3,5];case 3:return console.warn("realtimeFrame error",i.sent()),[3,5];case 4:return this.realtimeState&&(this.realtimeState.busy=!1),[7];case 5:return this.realtimeLoopId=requestAnimationFrame(y),[2]}})}).call(s)},this.realtimeLoopId=requestAnimationFrame(y),[2]}})}).call(this)}},{key:"stopRealtimeUpscale",value:function(){this.realtimeLoopId&&(cancelAnimationFrame(this.realtimeLoopId),this.realtimeLoopId=null),this.realtimeState&&(this.realtimeState.running=!1,this.realtimeState=null)}},{key:"downloadUpscaled",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return(0,o._)(function(){var n,s,o,i,a,c;return(0,u._)(this,function(l){switch(l.label){case 0:if(n=e.type.startsWith("video"),s=t||this.networkSize,!n)return[3,2];return[4,this.upscaleVideo(e,s)];case 1:return i=l.sent(),[3,4];case 2:return[4,this.upscaleImage(e,s)];case 3:i=l.sent(),l.label=4;case 4:return o=i,a=URL.createObjectURL(o),(c=document.createElement("a")).href=a,c.download=r||"upscaled_".concat(Date.now(),".").concat(n?"mp4":"png"),c.click(),URL.revokeObjectURL(a),[2,o]}})}).call(this)}},{key:"getSupportedNetworks",value:function(){return Object.keys(this.networks)}},{key:"getAppState",value:function(){return{backend:e.getBackendType(),isProcessing:!1,progress:0,width:0,height:0}}},{key:"onProgress",value:function(e){"function"==typeof e&&(this.progressCallback=e)}},{key:"dispose",value:function(){this.stopRealtimeUpscale(),this.workerInstance&&(this.workerInstance.terminate(),this.workerInstance=null),this.messageHandlers={},this.progressCallback=null,this.processingType=null,this.weightsCache.clear()}}],[{key:"isSupported",value:function(){try{var e="u">typeof Worker,t="u">typeof OffscreenCanvas||"u">typeof document&&!!document.createElement("canvas").transferControlToOffscreen,r="u">typeof Blob;return e&&t&&r}catch(e){return!1}}},{key:"isVideoSupported",value:function(){try{return"u">typeof VideoEncoder&&"u">typeof VideoDecoder}catch(e){return!1}}},{key:"extractProgressValue",value:function(e){var t,r,n,s=null!=(n=null!=(r=null!=(t=e.data)?t:e.progress)?r:e.value)?n:e.percentage;return"number"==typeof s?Math.min(100,Math.max(0,Math.round(s))):null}},{key:"loadImageMetadata",value:function(e,t){return new Promise(function(r,n){var s=new Blob([e],{type:t}),o=URL.createObjectURL(s),i=new Image;i.onload=function(){URL.revokeObjectURL(o),r({width:i.width,height:i.height})},i.onerror=function(){URL.revokeObjectURL(o),n(Error("Failed to load image"))},i.src=o})}},{key:"loadVideoMetadata",value:function(e,t){return new Promise(function(r,n){var s=URL.createObjectURL(e),o=document.createElement("video");o.src=s;var i=setTimeout(function(){return n(Error("Timeout"))},t);o.onloadedmetadata=function(){clearTimeout(i),URL.revokeObjectURL(s),r({width:o.videoWidth,height:o.videoHeight,duration:o.duration})},o.onerror=function(){clearTimeout(i),URL.revokeObjectURL(s),n(Error("Failed to load video"))}})}},{key:"getGPUCapability",value:function(){return(0,o._)(function(){var e,t;return(0,u._)(this,function(r){switch(r.label){case 0:if(r.trys.push([0,3,,4]),!navigator.gpu)return[3,2];return[4,navigator.gpu.requestAdapter()];case 1:if(e=r.sent())return[2,Math.min(e.limits.maxStorageBufferBindingSize/512,0x4000000)];r.label=2;case 2:if(t=document.createElement("canvas").getContext("webgl2"))return[2,Math.pow(t.getParameter(t.MAX_TEXTURE_SIZE),2)];return[2,8388608];case 3:return r.sent(),[2,8388608];case 4:return[2]}})})()}},{key:"getBackendType",value:function(){try{if(navigator.gpu)return"webgpu";if(document.createElement("canvas").getContext("webgl2"))return"webgl";return"unknown"}catch(e){return"unknown"}}}]),e}();(0,c._)(d,"DEFAULT_TIMEOUTS",{IMAGE:3e5,VIDEO:36e5,METADATA:1e4}),(0,c._)(d,"DEFAULT_DELAYS",{INIT:500,NETWORK:300})},{"@swc/helpers/cjs/_async_to_generator.cjs":"cZn0e","@swc/helpers/cjs/_class_call_check.cjs":"4Uf9M","@swc/helpers/cjs/_create_class.cjs":"igUuK","@swc/helpers/cjs/_define_property.cjs":"ltU3W","@swc/helpers/cjs/_object_spread.cjs":"kyoEj","@swc/helpers/cjs/_ts_generator.cjs":"eltGh","@parcel/transformer-js/src/esmodule-helpers.js":"qpMMf"}],"4Uf9M":[function(e,t,r,n){"use strict";r._=function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}},{}],igUuK:[function(e,t,r,n){"use strict";function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r._=function(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),e}},{}],ltU3W:[function(e,t,r,n){"use strict";r._=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},{}],kyoEj:[function(e,t,r,n){"use strict";var s=e("9f9b8a24218ee51e");r._=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){s._(e,t,r[t])})}return e}},{"9f9b8a24218ee51e":"ltU3W"}],qpMMf:[function(e,t,r,n){r.interopDefault=function(e){return e&&e.__esModule?e:{default:e}},r.defineInteropFlag=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.exportAll=function(e,t){return Object.keys(e).forEach(function(r){"default"===r||"__esModule"===r||Object.prototype.hasOwnProperty.call(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[r]}})}),t},r.export=function(e,t,r){Object.defineProperty(e,t,{enumerable:!0,get:r})}},{}]},["hrC3O"],"hrC3O","parcelRequire4dc0",{});