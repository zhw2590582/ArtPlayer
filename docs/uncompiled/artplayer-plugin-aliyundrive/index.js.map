{"mappings":"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","sources":["packages/artplayer-plugin-aliyundrive/src/index.js","node_modules/@parcel/runtime-js/lib/bundles/runtime-b84c1c3827c02482.js","node_modules/@parcel/transformer-js/src/esmodule-helpers.js"],"sourcesContent":["import style from 'bundle-text:./style.less';\n\nexport default function artplayerPluginAliyundrive(option = { onlyOnFullscreen: true, playlist: [] }) {\n    return (art) => {\n        const {\n            template: { $player, $bottom },\n            constructor: {\n                utils: { append, query, secondToTime, setStyle },\n            },\n        } = art;\n\n        let index = 0;\n\n        function play() {\n            const playItme = option.playlist[index];\n            if (!playItme) return;\n            art.poster = playItme.poster || '';\n            playItme.quality = playItme.quality || [];\n            const quality = playItme.quality.find((item) => item.default) || playItme.quality[0];\n            art.url = playItme.url || quality.url || '';\n        }\n\n        function next() {\n            const nextIndex = index + 1;\n            index = nextIndex > option.playlist.length - 1 ? 0 : nextIndex;\n            play();\n        }\n\n        function prev() {\n            const prevIndex = index - 1;\n            index = prevIndex < 0 ? 0 : prevIndex;\n            play();\n        }\n\n        function initControl() {\n            const $control = append(\n                $player,\n                `\n                    <div class=\"artplayer-plugin-aliyundrive\">\n                        <div class=\"apa-control\">\n                            <div class=\"apa-control-current\"></div>\n                            <div class=\"apa-control-progress\">\n                                <div class=\"apa-control-progress-inner\">\n                                    <div class=\"apa-control-loaded\"></div>\n                                    <div class=\"apa-control-played\">\n                                        <div class=\"apa-control-indicator\"></div>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class=\"apa-control-duration\"></div>\n                        </div>\n                        <div class=\"apa-tool\"></div>\n                    </div>\n                `,\n            );\n\n            const $current = query('.apa-control-current', $control);\n            const $duration = query('.apa-control-duration', $control);\n            const $played = query('.apa-control-played', $control);\n            const $loaded = query('.apa-control-loaded', $control);\n\n            const events = ['video:loadedmetadata', 'video:timeupdate', 'video:progress'];\n            for (let index = 0; index < events.length; index++) {\n                art.on(events[index], () => {\n                    $current.innerText = secondToTime(art.currentTime);\n                    $duration.innerText = secondToTime(art.duration);\n                    setStyle($played, 'width', `${art.played * 100}%`);\n                    setStyle($loaded, 'width', `${art.loaded * 100}%`);\n                });\n            }\n\n            if (option.onlyOnFullscreen) {\n                setStyle($control, 'display', 'none');\n                setStyle($bottom, 'display', null);\n                const events = ['fullscreen', 'fullscreenWeb'];\n                for (let index = 0; index < events.length; index++) {\n                    art.on(events[index], (state) => {\n                        if (state) {\n                            setStyle($control, 'display', null);\n                            setStyle($bottom, 'display', 'none');\n                        } else {\n                            setStyle($control, 'display', 'none');\n                            setStyle($bottom, 'display', null);\n                        }\n                    });\n                }\n            } else {\n                setStyle($bottom, 'display', 'none');\n            }\n        }\n\n        initControl();\n        play();\n\n        return {\n            name: 'artplayerPluginAliyundrive',\n            play,\n            next,\n            prev,\n        };\n    };\n}\n\nartplayerPluginAliyundrive.env = process.env.NODE_ENV;\nartplayerPluginAliyundrive.version = process.env.APP_VER;\nartplayerPluginAliyundrive.build = process.env.BUILD_DATE;\n\nif (typeof document !== 'undefined') {\n    if (!document.getElementById('artplayer-plugin-aliyundrive')) {\n        const $style = document.createElement('style');\n        $style.id = 'artplayer-plugin-aliyundrive';\n        $style.textContent = style;\n        document.head.appendChild($style);\n    }\n}\n\nif (typeof window !== 'undefined') {\n    window['artplayerPluginAliyundrive'] = artplayerPluginAliyundrive;\n}\n","module.exports = \"15b2d952cfc074cb\";","exports.interopDefault = function (a) {\n  return a && a.__esModule ? a : {default: a};\n};\n\nexports.defineInteropFlag = function (a) {\n  Object.defineProperty(a, '__esModule', {value: true});\n};\n\nexports.exportAll = function (source, dest) {\n  Object.keys(source).forEach(function (key) {\n    if (key === 'default' || key === '__esModule' || dest.hasOwnProperty(key)) {\n      return;\n    }\n\n    Object.defineProperty(dest, key, {\n      enumerable: true,\n      get: function () {\n        return source[key];\n      },\n    });\n  });\n\n  return dest;\n};\n\nexports.export = function (dest, destName, get) {\n  Object.defineProperty(dest, destName, {\n    enumerable: true,\n    get: get,\n  });\n};\n"],"names":[],"version":3,"file":"index.js.map","sourceRoot":"../../../"}