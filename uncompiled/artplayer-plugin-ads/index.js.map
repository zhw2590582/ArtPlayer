{"mappings":"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","sources":["src/index.js","../../node_modules/@parcel/runtime-js/lib/bundles/runtime-845a50df90dd29ef.js","../../node_modules/@parcel/transformer-js/src/esmodule-helpers.js"],"sourcesContent":["import style from 'bundle-text:./style.less';\n\nexport default function artplayerPluginAds(option) {\n    return (art) => {\n        const {\n            template: { $player },\n            icons: { volume, volumeClose, fullscreenOn, fullscreenOff, loading },\n            constructor: {\n                validator,\n                utils: { query, append, setStyle },\n            },\n        } = art;\n\n        option = validator(\n            {\n                html: '',\n                video: '',\n                url: '',\n                playDuration: 5,\n                totalDuration: 10,\n                muted: false,\n                i18n: {\n                    close: '关闭广告',\n                    countdown: '%s秒',\n                    detail: '查看详情',\n                    canBeClosed: '%s秒后可关闭广告',\n                },\n                ...option,\n            },\n            {\n                html: '?string',\n                video: '?string',\n                url: '?string',\n                playDuration: 'number',\n                totalDuration: 'number',\n                muted: '?boolean',\n                i18n: {\n                    close: 'string',\n                    countdown: 'string',\n                    detail: 'string',\n                    canBeClosed: 'string',\n                },\n            },\n        );\n\n        let $ads = null;\n        let $timer = null;\n        let $close = null;\n        let $countdown = null;\n        let $control = null;\n        let $loading = null;\n\n        let time = 0;\n        let timer = null;\n        let isEnd = false;\n        let isInit = false;\n        let isCanClose = false;\n\n        function getI18n(val, str) {\n            return str.replace('%s', val);\n        }\n\n        function skip() {\n            isEnd = true;\n            art.play();\n            if (option.video) $ads.pause();\n            setStyle(art.template.$ads, 'display', 'none');\n            art.emit('artplayerPluginAds:skip', option);\n        }\n\n        function play() {\n            if (isEnd) return;\n\n            timer = setTimeout(() => {\n                time += 1;\n\n                const playDuration = option.playDuration - time;\n                if (playDuration >= 1) {\n                    $close.innerHTML = getI18n(playDuration, option.i18n.canBeClosed);\n                } else {\n                    $close.innerHTML = option.i18n.close;\n                    if (!isCanClose) {\n                        isCanClose = true;\n                    }\n                }\n\n                $countdown.innerHTML = getI18n(option.totalDuration - time, option.i18n.countdown);\n\n                if (time >= option.totalDuration) {\n                    skip();\n                } else {\n                    play();\n                }\n            }, 1000);\n        }\n\n        function pause() {\n            if (isEnd) return;\n            clearTimeout(timer);\n        }\n\n        function show() {\n            art.template.$ads = append($player, '<div class=\"artplayer-plugin-ads\"></div>');\n\n            $ads = append(\n                art.template.$ads,\n                option.video\n                    ? `<video class=\"artplayer-plugin-ads-video\" src=\"${option.video}\" loop playsInline></video>`\n                    : `<div class=\"artplayer-plugin-ads-html\">${option.html}</div>`,\n            );\n\n            $loading = append(art.template.$ads, '<div class=\"artplayer-plugin-ads-loading\"></div>');\n            append($loading, loading);\n\n            $timer = append(\n                art.template.$ads,\n                `<div class=\"artplayer-plugin-ads-timer\">\n                    <div class=\"artplayer-plugin-ads-close\">${\n                        option.playDuration <= 0\n                            ? option.i18n.close\n                            : getI18n(option.playDuration, option.i18n.canBeClosed)\n                    }</div>\n                    <div class=\"artplayer-plugin-ads-countdown\">${getI18n(\n                        option.totalDuration,\n                        option.i18n.countdown,\n                    )}</div>\n                </div>`,\n            );\n\n            $close = query('.artplayer-plugin-ads-close', $timer);\n            $countdown = query('.artplayer-plugin-ads-countdown', $timer);\n\n            if (option.playDuration >= option.totalDuration) {\n                setStyle($close, 'display', 'none');\n            }\n\n            art.proxy($close, 'click', () => {\n                if (isCanClose) {\n                    skip();\n                }\n            });\n\n            $control = append(\n                art.template.$ads,\n                `<div class=\"artplayer-plugin-ads-control\">\n                    <div class=\"artplayer-plugin-ads-detail\">${option.i18n.detail}</div>\n                    <div class=\"artplayer-plugin-ads-muted\"></div>\n                    <div class=\"artplayer-plugin-ads-fullscreen\"></div>\n                </div>`,\n            );\n\n            const $detail = query('.artplayer-plugin-ads-detail', $control);\n            const $muted = query('.artplayer-plugin-ads-muted', $control);\n            const $fullscreen = query('.artplayer-plugin-ads-fullscreen', $control);\n\n            if (option.url) {\n                art.proxy($detail, 'click', () => {\n                    window.open(option.url);\n                    art.emit('artplayerPluginAds:click', option);\n                });\n            } else {\n                setStyle($detail, 'display', 'none');\n            }\n\n            if (option.video) {\n                const $volume = append($muted, volume);\n                const $volumeClose = append($muted, volumeClose);\n                setStyle($volumeClose, 'display', 'none');\n\n                // If the ad was set to muted initially, match the icon\n                if (option.muted) {\n                    $ads.muted = true;\n                    setStyle($volume, 'display', 'none');\n                    setStyle($volumeClose, 'display', 'inline-flex');\n                }\n\n                art.proxy($muted, 'click', () => {\n                    $ads.muted = !$ads.muted;\n                    if ($ads.muted) {\n                        setStyle($volume, 'display', 'none');\n                        setStyle($volumeClose, 'display', 'inline-flex');\n                    } else {\n                        setStyle($volume, 'display', 'inline-flex');\n                        setStyle($volumeClose, 'display', 'none');\n                    }\n                });\n            } else {\n                setStyle($muted, 'display', 'none');\n            }\n\n            const $fullscreenOn = append($fullscreen, fullscreenOn);\n            const $fullscreenOff = append($fullscreen, fullscreenOff);\n            setStyle($fullscreenOff, 'display', 'none');\n\n            art.proxy($fullscreen, 'click', () => {\n                art.fullscreen = !art.fullscreen;\n                if (art.fullscreen) {\n                    setStyle($fullscreenOn, 'display', 'inline-flex');\n                    setStyle($fullscreenOff, 'display', 'none');\n                } else {\n                    setStyle($fullscreenOn, 'display', 'none');\n                    setStyle($fullscreenOff, 'display', 'inline-flex');\n                }\n            });\n\n            art.proxy($ads, 'click', () => {\n                if (option.url) window.open(option.url);\n                art.emit('artplayerPluginAds:click', option);\n            });\n        }\n\n        function init() {\n            if (isInit) return;\n            isInit = true;\n\n            show();\n            art.pause();\n\n            if (option.video) {\n                art.proxy($ads, 'error', skip);\n                art.proxy($ads, 'loadedmetadata', () => {\n                    play();\n                    $ads.play();\n                    setStyle($timer, 'display', 'flex');\n                    setStyle($control, 'display', 'flex');\n                    setStyle($loading, 'display', 'none');\n                });\n            } else {\n                play();\n                setStyle($timer, 'display', 'flex');\n                setStyle($control, 'display', 'flex');\n                setStyle($loading, 'display', 'none');\n            }\n\n            art.proxy(document, 'visibilitychange', () => {\n                if (document.hidden) {\n                    pause();\n                } else {\n                    play();\n                }\n            });\n        }\n\n        art.on('ready', () => {\n            art.once('play', init);\n            art.once('video:playing', init);\n        });\n\n        return {\n            name: 'artplayerPluginAds',\n            skip,\n            pause,\n            play,\n        };\n    };\n}\n\nartplayerPluginAds.env = process.env.NODE_ENV;\nartplayerPluginAds.version = process.env.APP_VER;\nartplayerPluginAds.build = process.env.BUILD_DATE;\n\nif (typeof document !== 'undefined') {\n    if (!document.getElementById('artplayer-plugin-ads')) {\n        const $style = document.createElement('style');\n        $style.id = 'artplayer-plugin-ads';\n        $style.textContent = style;\n        document.head.appendChild($style);\n    }\n}\n\nif (typeof window !== 'undefined') {\n    window['artplayerPluginAds'] = artplayerPluginAds;\n}\n","module.exports = \"40889a184827c504\";","exports.interopDefault = function (a) {\n  return a && a.__esModule ? a : {default: a};\n};\n\nexports.defineInteropFlag = function (a) {\n  Object.defineProperty(a, '__esModule', {value: true});\n};\n\nexports.exportAll = function (source, dest) {\n  Object.keys(source).forEach(function (key) {\n    if (key === 'default' || key === '__esModule' || dest.hasOwnProperty(key)) {\n      return;\n    }\n\n    Object.defineProperty(dest, key, {\n      enumerable: true,\n      get: function () {\n        return source[key];\n      },\n    });\n  });\n\n  return dest;\n};\n\nexports.export = function (dest, destName, get) {\n  Object.defineProperty(dest, destName, {\n    enumerable: true,\n    get: get,\n  });\n};\n"],"names":[],"version":3,"file":"index.js.map","sourceRoot":"../../../packages/artplayer-plugin-ads/"}